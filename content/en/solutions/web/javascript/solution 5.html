<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Zahlenliste</title>
    <script>
      function main() {
        var input = document.getElementById("numbers").value.trim();
        var numbers = input.split(" ");

        var isNotValid = validateInput(numbers);
        console.log(isNotValid);

        if (isNotValid) {
          document.getElementById("result").innerHTML = "Ungültige Eingabe! Bitte geben Sie nur Zahlen ein.";
          return;
        }

        numbers = convertNumber(numbers);
        console.log(numbers);

        var max = getMaxNumber(numbers);
        console.log(max);

        var min = getMinNumber(numbers);
        console.log(min);

        var even = sum(numbers, true);
        console.log(even);

        var odd = sum(numbers, false);
        console.log(odd);

        var sorted = sortNumbers(numbers);
        console.log(sorted);

        var totalSum = total(numbers);
        console.log(totalSum);

        var average = averageNumbers(totalSum, numbers);
        console.log(average);

        document.getElementById("result").innerHTML =
          "Größte Zahl: " +
          max +
          "<br>" +
          "Kleinste Zahl: " +
          min +
          "<br>" +
          "Summe der geraden Zahlen: " +
          even +
          "<br>" +
          "Summe der ungeraden Zahlen: " +
          odd +
          "<br>" +
          "Sortierte Liste: " +
          sorted.join(", ") +
          "<br>" +
          "Gesamtsumme: " +
          totalSum +
          "<br>" +
          "Durchschnitt: " +
          average;
      }

      function validateInput(numbers) {
        return numbers.some((element) => {
          return isNaN(element);
        });
      }

      function convertNumber(numbers) {
        return numbers.map((num) => {
          return parseInt(num);
        });
      }

      function getMaxNumber(numbers) {
        return Math.max.apply(null, numbers);
      }

      function getMinNumber(numbers) {
        return Math.min.apply(null, numbers);
      }

      function sum(numbers, isEven) {
        return numbers
          .filter((num) => {
            if (isEven) {
              return num % 2 === 0;
            }
            return num % 2 !== 0;
          })
          .reduce((acc, num) => {
            return acc + num;
          }, 0);
      }

      function sortNumbers(numbers) {
        return numbers.sort((a, b) => {
          return a - b;
        });
      }

      function total(numbers) {
        return numbers.reduce((acc, num) => {
          return acc + num;
        }, 0);
      }

      function averageNumbers(totalSum, numbers) {
        return totalSum / numbers.length;
      }
    </script>
  </head>

  <body>
    <h1>Zahlenliste</h1>
    <label for="numbers">Zahlen eingeben (durch Leerzeichen getrennt):</label>
    <br />
    <input type="text" id="numbers" />
    <br />
    <button onclick="main()">Operationen ausführen</button>
    <div id="result" class="result"></div>
  </body>
</html>
